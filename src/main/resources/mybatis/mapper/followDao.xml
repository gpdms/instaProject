<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.study.springboot.follow.FollowDao">

<!-- 팔로워 리스트: 나를 팔로우하는 사람들의 아이디 -->
	<select id="selectFollower" resultType="String">
		select from_user from follow where to_user = #{mem_id}
	</select>

<!-- 팔로잉 리스트: 내가 팔로우하는 사람들의 아이디 -->
	<select id="selectFollowing" resultType="String">
		select to_user from follow where from_user = #{mem_id}
	</select>
	
<!-- 팔로우 되어있는지 확인 -->
	<select id="checkFollow" parameterType="String" resultType="Integer">
		select count(flw_id) from follow where from_user = #{sessionId} and to_user = #{mem_id}
	</select>
	
<!-- 팔로우 -->
	<insert id="addFollow">
		insert into follow (from_user, to_user, flw_date) values(#{sessionId}, #{mem_id}, now())
	</insert>
	
<!-- 언팔로우 -->
	<delete id="unfollow">
		delete from follow where from_user=#{sessionId} and to_user = #{mem_id}
	</delete>
	
</mapper>